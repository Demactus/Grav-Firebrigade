title: Einsatze 
description: Simple contact directory with tags.
type: flex-objects

# Flex Configuration
config:
  # Administration Configuration
  admin:
    # Admin router (optional)
    router:
      path: '/einsaetze'

    # Admin menu (optional)
    menu:
      list:
        route: '/einsaetze'
        title: Einsatze
        icon: fa-fire
        # Authorization to collection admin
        authorize: ['admin.einsaetze.list', 'admin.super']
        # Priority -10 .. 10 (highest goes up)
        priority: 2

    # Admin template type / folder
    template: default

    # Permissions
    permissions:
      # Primary permissions
      admin.einsaetze:
        type: crudpl
        label: Flex Einsatzberichte 

    # List view
    list:
      title: name
      fields:
        published:
          field:
            type: toggle
            label: üñ•Ô∏è 
          width: 6
        date:
          search: true
          width: 8
        time:
          width: 8
        kurzbeschreibung_freigegeben:
          field:
            type: toggle
            label: üÜó
          width: 6
        titel:
          search: true
          link: edit
        ort:
      options:
        per_page: 40
        order:
          by: date
          dir: desc 

    # Edit View
    edit:
      title:
        template: '{{ object.titel ?? ''Titel'' }}, {{ object.date ?? ''Datum'' }}, {{ object.ort ?? ''Ort'' }}'

    # Preview View
    preview:
      enabled: true
      route:
        #template: '/plugins/flex-objects/directory:einsaetze'

    # Data Export
    export:
      enabled: true
      method: 'yamlSerialize'
      formatter:
        class: 'Grav\Framework\File\Formatter\YamlFormatter'
      filename: 'einsaetze'

  # Site Configuration
  site:
    templates:
      collection:
        # Lookup for the template layout files for collections of objects
        paths:
          - 'flex/{TYPE}/collection/{LAYOUT}{EXT}'
      object:
        # Lookup for the template layout files for objects
        paths:
          - 'flex/{TYPE}/object/{LAYOUT}{EXT}'
      defaults:
        # Default template {TYPE}; overridden by filename of this blueprint if template folder exists
        type: einsaetze
        # Default template {LAYOUT}; can be overridden in render calls (usually Twig in templates)
        layout: default

  # Data Configuration
  data:
    # Object class to be used, allowing custom methods for the object
    object: 'Grav\Common\Flex\Types\Generic\GenericObject'
    # Collection class to be used, allowing custom methods for the collections
    collection: 'Grav\Common\Flex\Types\Generic\GenericCollection'
    # Index class to be used, works as a quick database-like lookup index
    index: 'Grav\Common\Flex\Types\Generic\GenericIndex'
    storage:
      # Storage class, use single file storage (does not support images and assets)
      class: 'Grav\Framework\Flex\Storage\SimpleStorage'
      options:
        formatter:
          # File formatter class, in this case the file is stored in markdown
          class: 'Grav\Framework\File\Formatter\YamlFormatter'
        # JSON file where all the objects will be stored
        folder: user-data://flex-objects/einsatze.yaml
    search:
      # Search options
      options:
        contains: 1
      # Fields to be searched
      fields:
        - titel 
    ordering:
      date: DSC 

form:
  validation: loose

  fields:
    published:
      type: toggle
      label: Published
      highlight: 1
      default: 1
      options:
        1: PLUGIN_ADMIN.YES
        0: PLUGIN_ADMIN.NO
      validate:
        type: bool
        required: true

    titel:
      type: text
      label: Titel
      validate:
        required: true
      help: "Beschreibung der Lage vor Ort. Dabei idealerweise Nominativ verwenden (z.B. brennender PKW, Wohnhausbrand) und keine Telegram-Form (z.B. brennt PKW)."

    date:
      type: date
      label: Datum
      validate:
        required: true
      help: "Das Datum des Einsatzes"

    time:
      type: time
      label: Zeit
      validate:
            required: true

    ort:
      type: text
      label: Einsatzort
      validate:
        required: true
      help: "Der Einsatzort. Stra√üe, Ort. Also z.B. Seestra√üe, Inheiden"

    standorte:
      type: selectize
      selectize:
        options:
          - text: "Inheiden"
            value: "Inheiden"
          - text: "Hungen"
            value: "Hungen"
          - text: "Trais-Horloff"
            value: "Trais-Horloff"
          - text: "Steinheim"
            value: "Steinheim"
          - text: "Utphe"
            value: "Utphe"
          - text: "Bellersheim"
            value: "Bellersheim"
      size: long 
      label: Standorte
      classes: fancy
      validate:
        type: commalist

    blog:
      type: pages
      size: long 
      classes: fancy
      label: "News-Artikel"
      start_route: "/blog"
      show_all: true
      toggleable: true
      show_modular: false
      show_route: false
      help: "Wenn es einen News-/Blog-Artikel gibt, kann dieser hier verlinkt werden"

    kurzbeschreibung_freigegeben:
      type: toggle
      label: Kurzbeschreibung freigegebenn
      highlight: 1
      default: 0
      options:
        1: PLUGIN_ADMIN.YES
        0: PLUGIN_ADMIN.NO
      validate:
        type: bool
        required: true
      help: "Kurzbeschreibungstext freigegeben und ver√∂ffentlicht."

    kurzbeschreibung:
      type: textarea
      label: Kurzbeschreibung
      rows: 10
      help: "Eine kurze Beschreibung der T√§tigkeit der Feuerwehr. Dabei soll im wesentlichen beschrieben werden, was insgesamt passiert ist und nicht sehr speziell auf die T√§tigkeiten eines einzelnen Standortes eingegangen werden."

    add_image:
      type: file
      destination: 'image://einsatz-images/'
      accept:
        - image/*
      filesize: 5
      help: "Ein Foto welches die T√§tigkeit der Feuerwehr beschreibt. Pers√∂nlichkeitsrechte und Bildrechte beachten! Bildgr√∂√üe: 1920x1080 Pixel."

    picked_image:
      type: filepicker
      folder: 'image://einsatz-images/'
      preview_images: true
